/* GlkOte Modernized Style (for GitHub Pages Interactive Fiction Player)
 * Based on original by Andrew Plotkin <erkyrath@eblong.com>
 * Customized by ChatGPT for local Quixe builds
 */

/* ========== GLOBAL LAYOUT ========== */
#gameport {
  overflow: hidden;
  position: relative;
  background: #f6f5ef;
  color: #222;
  font-family: "Noto Serif JP", "Georgia", "Times New Roman", serif;
  height: 100%;
}

#windowport {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
}

/* ========== ERROR & LOADING PANES ========== */
#errorpane {
  position: absolute;
  top: 0;
  width: 100%;
  background: #ffcccc;
  border-bottom: 2px solid #d33;
  z-index: 9999;
  text-align: center;
  padding: 0.5em;
  font-weight: bold;
}

#errorpane.WarningPane {
  background: #cfd9ff;
  border-bottom-color: #5577ff;
}

#loadingpane {
  position: absolute;
  width: 100%;
  text-align: center;
  top: 40%;
  font-size: 1.2em;
  color: #666;
}

#loadingpane img {
  opacity: 0.8;
}

/* ========== MAIN WINDOW FRAME ========== */
.WindowFrame {
  position: absolute;
  margin: 0;
  background: #fcfaf5;
  border-radius: 6px;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
  overflow: hidden;
  transition: background 0.3s ease, color 0.3s ease;
}

/* Text buffer window */
.BufferWindow {
  overflow-y: auto;
  overflow-x: hidden;
  font-size: 16px;
  line-height: 1.6;
  padding: 10px 14px;
  color: #2c2c2c;
  background: #fffdf7;
}

/* Lines and spacing */
.BufferLine {
  white-space: pre-wrap;
  margin-bottom: 0.2em;
}

.BufferLine:last-child {
  margin-bottom: 1em;
}

/* Grid window (status bar, etc.) */
.GridWindow {
  background: #eee8d5;
  overflow: hidden;
  font-family: "JetBrains Mono", "Consolas", monospace;
  font-size: 14px;
  padding: 8px 10px;
  color: #333;
}

/* "More" prompt */
.MorePrompt {
  position: absolute;
  right: 6px;
  bottom: 6px;
  padding: 2px 8px;
  border-radius: 4px;
  background: rgba(100, 60, 0, 0.7);
  color: #fffde0;
  font-weight: bold;
  pointer-events: none;
}

/* Input field */
.Input {
  border: none;
  background: transparent;
  font-weight: bold;
  color: #000;
  outline: none;
}

.BufferWindow .Input {
  font-size: 16px;
  font-family: inherit;
  border-bottom: 2px solid #666;
  transition: border-color 0.2s ease;
}

.BufferWindow .Input:focus {
  border-color: #0077cc;
}

/* Graphics window canvas */
.GraphicsWindow canvas {
  display: block;
  background-color: #ffffff;
  margin: auto;
}

/* Styles for story text */
.Style_normal {}
.Style_emphasized { font-style: italic; }
.Style_preformatted { font-family: "JetBrains Mono", monospace; }
.Style_header { font-weight: bold; font-size: 18px; margin-top: 0.5em; }
.Style_subheader { font-weight: bold; font-size: 16px; color: #444; }
.Style_alert { font-weight: bold; color: #c00; }
.Style_note { font-style: italic; color: #666; }
.Style_blockquote {
  background: #f7f2d3;
  padding: 6px 10px;
  border-left: 3px solid #d9b867;
  border-radius: 4px;
  margin: 0.6em 0;
}
.Style_input { font-weight: bold; color: #3a0000; }

/* ========== DARK THEME (auto) ========== */
@media (prefers-color-scheme: dark) {
  #gameport {
    background: #1c1b19;
    color: #eee;
  }

  .WindowFrame {
    background: #242321;
    box-shadow: 0 0 12px rgba(0,0,0,0.6);
  }

  .BufferWindow {
    background: #1e1d1b;
    color: #e8e6e3;
  }

  .GridWindow {
    background: #2c2a27;
    color: #ccc;
  }

  .Style_blockquote {
    background: #2f2d24;
    border-left-color: #c5a85a;
  }

  .BufferWindow .Input {
    border-color: #888;
    color: #fff;
  }

  .BufferWindow .Input:focus {
    border-color: #58a6ff;
  }

  .MorePrompt {
    background: rgba(200, 160, 60, 0.4);
    color: #fff2b0;
  }

  #errorpane {
    background: #882222;
    border-bottom-color: #ff6666;
  }

  #errorpane.WarningPane {
    background: #223366;
    border-bottom-color: #6688ff;
  }
}
